// This file is auto-generated by @hey-api/openapi-ts

import { z } from "zod"

export const zAgentCreateEvent = z.object({
  machine: z.enum(["dtn01", "dtns", "perlmutter"]),
  duration: z.string(),
  compute_type: z.enum(["gpu", "cpu"]),
  num_nodes: z.number().int(),
  extra: z.union([z.object({}), z.null()]).optional(),
})

export const zBodyLoginLoginAccessToken = z.object({
  grant_type: z.union([z.string().regex(/^password$/), z.null()]).optional(),
  username: z.string(),
  password: z.string(),
  scope: z.string().optional().default(""),
  client_id: z.union([z.string(), z.null()]).optional(),
  client_secret: z.union([z.string(), z.null()]).optional(),
})

export const zCanonicalEdge = z.object({
  input_id: z.string().uuid(),
  output_id: z.string().uuid(),
})

export const zCanonicalOperator = z.object({
  id: z.string().uuid(),
  label: z.string(),
  description: z.string(),
  image: z.string(),
  inputs: z.array(z.string().uuid()).optional().default([]),
  outputs: z.array(z.string().uuid()).optional().default([]),
  parameters: z
    .union([
      z.array(
        z.object({
          name: z.string(),
          label: z.string(),
          description: z.string(),
          type: z.enum(["str", "int", "float", "bool", "mount", "str-enum"]),
          default: z.string(),
          required: z.boolean(),
          options: z.union([z.array(z.string()), z.null()]).optional(),
        }),
      ),
      z.null(),
    ])
    .optional(),
  tags: z
    .array(
      z.object({
        value: z.string(),
        description: z.union([z.string(), z.null()]).optional(),
      }),
    )
    .optional()
    .default([]),
  parallel_config: z
    .union([
      z.object({
        type: z.enum(["none", "embarrassing"]).optional(),
      }),
      z.null(),
    ])
    .optional(),
  spec_id: z.string().uuid(),
  node_type: z.enum(["operator", "port"]).optional(),
})

export const zCanonicalPipelineData = z.object({
  operators: z.array(zCanonicalOperator).optional().default([]),
  ports: z
    .array(
      z.object({
        id: z.string().uuid(),
        node_type: z.enum(["operator", "port"]).optional(),
        port_type: z.enum(["input", "output"]),
        canonical_operator_id: z.string().uuid(),
        portkey: z.string(),
      }),
    )
    .optional()
    .default([]),
  edges: z.array(zCanonicalEdge).optional().default([]),
})

export const zCanonicalPort = z.object({
  id: z.string().uuid(),
  node_type: z.enum(["operator", "port"]).optional(),
  port_type: z.enum(["input", "output"]),
  canonical_operator_id: z.string().uuid(),
  portkey: z.string(),
})

export const zComputeType = z.enum(["gpu", "cpu"])

export const zHttpValidationError = z.object({
  detail: z
    .array(
      z.object({
        loc: z.array(z.unknown()),
        msg: z.string(),
        type: z.string(),
      }),
    )
    .optional(),
})

export const zMessage = z.object({
  message: z.string(),
})

export const zNodeType = z.enum(["operator", "port"])

export const zOperatorPosition = z.object({
  canonical_operator_id: z.string().uuid(),
  x: z.number(),
  y: z.number(),
})

export const zOperatorSpec = z.object({
  id: z.string().uuid(),
  label: z.string(),
  description: z.string(),
  image: z.string(),
  inputs: z
    .union([
      z.array(
        z.object({
          name: z.string(),
          label: z.string(),
          description: z.string(),
          type: z.string(),
        }),
      ),
      z.null(),
    ])
    .optional(),
  outputs: z
    .union([
      z.array(
        z.object({
          name: z.string(),
          label: z.string(),
          description: z.string(),
          type: z.string(),
        }),
      ),
      z.null(),
    ])
    .optional(),
  parameters: z
    .union([
      z.array(
        z.object({
          name: z.string(),
          label: z.string(),
          description: z.string(),
          type: z.enum(["str", "int", "float", "bool", "mount", "str-enum"]),
          default: z.string(),
          required: z.boolean(),
          options: z.union([z.array(z.string()), z.null()]).optional(),
        }),
      ),
      z.null(),
    ])
    .optional(),
  tags: z
    .union([
      z.array(
        z.object({
          value: z.string(),
          description: z.union([z.string(), z.null()]).optional(),
        }),
      ),
      z.null(),
    ])
    .optional(),
  parallel_config: z
    .union([
      z.object({
        type: z.enum(["none", "embarrassing"]).optional(),
      }),
      z.null(),
    ])
    .optional(),
})

export const zOperatorSpecInput = z.object({
  name: z.string(),
  label: z.string(),
  description: z.string(),
  type: z.string(),
})

export const zOperatorSpecOutput = z.object({
  name: z.string(),
  label: z.string(),
  description: z.string(),
  type: z.string(),
})

export const zOperatorSpecParameter = z.object({
  name: z.string(),
  label: z.string(),
  description: z.string(),
  type: z.enum(["str", "int", "float", "bool", "mount", "str-enum"]),
  default: z.string(),
  required: z.boolean(),
  options: z.union([z.array(z.string()), z.null()]).optional(),
})

export const zOperatorSpecTag = z.object({
  value: z.string(),
  description: z.union([z.string(), z.null()]).optional(),
})

export const zOperatorSpecs = z.object({
  data: z.array(zOperatorSpec),
})

export const zParallelConfig = z.object({
  type: z.enum(["none", "embarrassing"]).optional(),
})

export const zParallelType = z.enum(["none", "embarrassing"])

export const zParameterSpecType = z.enum([
  "str",
  "int",
  "float",
  "bool",
  "mount",
  "str-enum",
])

export const zPipelineCreate = z.object({
  data: z.object({}),
})

export const zPipelineDeploymentCreate = z.object({
  pipeline_id: z.string().uuid(),
  revision_id: z.number().int(),
})

export const zPipelineDeploymentPublic = z.object({
  id: z.string().uuid(),
  pipeline_id: z.string().uuid(),
  revision_id: z.number().int(),
  state: z.enum([
    "pending",
    "assigned_agents",
    "failed_to_start",
    "failure_on_agent",
    "running",
    "cancelled",
  ]),
  created_at: z.string().datetime(),
  updated_at: z.string().datetime(),
})

export const zPipelineDeploymentState = z.enum([
  "pending",
  "assigned_agents",
  "failed_to_start",
  "failure_on_agent",
  "running",
  "cancelled",
])

export const zPipelineDeploymentUpdate = z.object({
  state: zPipelineDeploymentState,
})

export const zPipelineDeploymentsPublic = z.object({
  data: z.array(zPipelineDeploymentPublic),
  count: z.number().int(),
})

export const zPipelinePublic = z.object({
  name: z.union([z.string().max(128), z.null()]).optional(),
  data: zCanonicalPipelineData,
  id: z.string().uuid(),
  owner_id: z.string().uuid(),
  updated_at: z.string().datetime(),
  created_at: z.string().datetime(),
  current_revision_id: z.number().int(),
})

export const zPipelineRevisionCreate = z.object({
  data: z.object({}),
})

export const zPipelineRevisionPositionsUpdate = z.object({
  positions: z.array(zOperatorPosition),
})

export const zPipelineRevisionPublic = z.object({
  pipeline_id: z.string().uuid(),
  revision_id: z.number().int(),
  data: zCanonicalPipelineData,
  tag: z.union([z.string(), z.null()]),
  positions: z.array(zOperatorPosition),
  created_at: z.string().datetime(),
})

export const zPipelineRevisionUpdate = z.object({
  tag: z.union([z.string().max(128), z.null()]).optional(),
})

export const zPipelineUpdate = z.object({
  name: z.union([z.string().max(128), z.null()]),
})

export const zPipelinesPublic = z.object({
  data: z.array(zPipelinePublic),
  count: z.number().int(),
})

export const zPortType = z.enum(["input", "output"])

export const zPublicHost = z.enum(["dtn01", "dtns", "perlmutter"])

export const zToken = z.object({
  access_token: z.string(),
  token_type: z.string().optional().default("bearer"),
  nats_jwt: z.string(),
})

export const zUpdatePassword = z.object({
  current_password: z.string().min(8).max(40),
  new_password: z.string().min(8).max(40),
})

export const zUserCreate = z.object({
  username: z.string().max(255),
  is_active: z.boolean().optional().default(true),
  is_superuser: z.boolean().optional().default(false),
  is_external: z.boolean().optional().default(false),
  full_name: z.union([z.string().max(255), z.null()]).optional(),
  password: z.string().min(8).max(40),
})

export const zUserPublic = z.object({
  username: z.string().max(255),
  is_active: z.boolean().optional().default(true),
  is_superuser: z.boolean().optional().default(false),
  is_external: z.boolean().optional().default(false),
  full_name: z.union([z.string().max(255), z.null()]).optional(),
  id: z.string().uuid(),
})

export const zUserUpdate = z.object({
  username: z.union([z.string().max(255), z.null()]).optional(),
  is_active: z.boolean().optional().default(true),
  is_superuser: z.boolean().optional().default(false),
  is_external: z.boolean().optional().default(false),
  full_name: z.union([z.string().max(255), z.null()]).optional(),
  password: z.union([z.string().min(8).max(40), z.null()]).optional(),
})

export const zUserUpdateMe = z.object({
  full_name: z.union([z.string().max(255), z.null()]).optional(),
  username: z.union([z.string().max(255), z.null()]).optional(),
})

export const zUsersPublic = z.object({
  data: z.array(zUserPublic),
  count: z.number().int(),
})

export const zValidationError = z.object({
  loc: z.array(z.unknown()),
  msg: z.string(),
  type: z.string(),
})

export const zLoginLoginAccessTokenResponse = zToken

export const zLoginLoginWithExternalTokenResponse = zToken

export const zLoginTestTokenResponse = zUserPublic

export const zUsersReadUsersResponse = zUsersPublic

export const zUsersCreateUserResponse = zUserPublic

export const zUsersDeleteUserMeResponse = zMessage

export const zUsersReadUserMeResponse = zUserPublic

export const zUsersUpdateUserMeResponse = zUserPublic

export const zUsersUpdatePasswordMeResponse = zMessage

export const zUsersDeleteUserResponse = zMessage

export const zUsersReadUserByIdResponse = zUserPublic

export const zUsersUpdateUserResponse = zUserPublic

export const zPipelinesReadPipelinesResponse = zPipelinesPublic

export const zPipelinesCreatePipelineResponse = zPipelinePublic

export const zPipelinesDeletePipelineResponse = zMessage

export const zPipelinesReadPipelineResponse = zPipelinePublic

export const zPipelinesUpdatePipelineResponse = zPipelinePublic

export const zPipelinesListPipelineRevisionsResponse = z.array(
  zPipelineRevisionPublic,
)

export const zPipelinesAddPipelineRevisionResponse = zPipelineRevisionPublic

export const zPipelinesReadPipelineRevisionResponse = zPipelineRevisionPublic

export const zPipelinesUpdatePipelineRevisionResponse = zPipelineRevisionPublic

export const zPipelinesUpdatePipelineRevisionPositionsResponse =
  zPipelineRevisionPublic

export const zPipelinesDuplicatePipelineResponse = zPipelinePublic

export const zPipelinesListPipelineDeploymentsResponse =
  zPipelineDeploymentsPublic

export const zPipelinesListPipelineRevisionDeploymentsResponse =
  zPipelineDeploymentsPublic

export const zDeploymentsListPipelineDeploymentsResponse =
  zPipelineDeploymentsPublic

export const zDeploymentsCreatePipelineDeploymentResponse =
  zPipelineDeploymentPublic

export const zDeploymentsReadPipelineDeploymentResponse =
  zPipelineDeploymentPublic

export const zDeploymentsUpdatePipelineDeploymentResponse =
  zPipelineDeploymentPublic

export const zOperatorsReadOperatorsResponse = zOperatorSpecs
