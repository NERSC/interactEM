# Environment Configuration for interactEM
# This file contains all environment variables for all backend services
# Each service is prefixed to maintain clear separation of concerns
# Services excluded from this consolidation:
# - backend/callout/ (uses separate .env)
# - frontend/ (uses separate config)
# - operators/distiller-streaming/ (uses separate .env)

# ============================================================================
# CORE Service Configuration
# ============================================================================
# Core shared module settings
CORE_LOG_LEVEL=INFO

# ============================================================================
# NATS Configuration (shared infrastructure)
# ============================================================================
NATS_SECURITY_MODE=creds
NATS_CREDS_FILE=conf/nats-conf/out_jwt/backend.creds
NATS_STREAM_STORAGE_TYPE=file

# ============================================================================
# APP (FastAPI) Service Configuration
# ============================================================================
# Domain
APP_DOMAIN=localhost

# Environment: local, staging, production
APP_ENVIRONMENT=local

# Project info
APP_PROJECT_NAME=interactEM
APP_STACK_NAME=interactEM

# Backend CORS
APP_BACKEND_CORS_ORIGINS="http://localhost,http://localhost:5173,https://localhost,https://localhost:5173,http://localhost.tiangolo.com,http://localhost:3000"

# Security
APP_SECRET_KEY=changethis
APP_EXTERNAL_SECRET_KEY=changeme
APP_EXTERNAL_ALGORITHM=HS256

# Superuser
APP_FIRST_SUPERUSER_USERNAME=admin@example.com
APP_FIRST_SUPERUSER_PASSWORD=changethis

# PostgreSQL
APP_POSTGRES_SERVER=localhost
APP_POSTGRES_PORT=5432
APP_POSTGRES_DB=app
APP_POSTGRES_USER=postgres
APP_POSTGRES_PASSWORD=changethis

# NATS
APP_NATS_SERVER_URL=nats://nats1:4222
APP_NATS_SERVER_URL_IN_CONTAINER=nats://host.containers.internal:4222
APP_NATS_FRONTEND_CREDS=conf/nats-conf/out_jwt/frontend.creds

# Sentry (optional)
APP_SENTRY_DSN=

# Container Registry
APP_CONTAINER_REGISTRY_URL=https://ghcr.io
APP_GITHUB_USERNAME=
APP_GITHUB_TOKEN=
APP_CONTAINER_REGISTRY_NAMESPACE=nersc
APP_OPERATOR_CONTAINER_PREFIX=interactem

# Internal API key
APP_ORCHESTRATOR_API_KEY=changethis

# ============================================================================
# AGENT Service Configuration
# ============================================================================
# Agent identity
AGENT_LOCAL=false
AGENT_PODMAN_SERVICE_URI=

# NATS Configuration
AGENT_NATS_SERVER_URL=nats://localhost:4222
AGENT_NATS_SERVER_URL_IN_CONTAINER=nats://host.containers.internal:4222
AGENT_NATS_CREDS_FILE=conf/nats-conf/out_jwt/backend.creds
AGENT_OPERATOR_CREDS_FILE=conf/nats-conf/out_jwt/operator.creds

# Agent tags and networks
AGENT_TAGS=[]
AGENT_NETWORKS='["perlmutter"]'
AGENT_NAME="SecretAgentMan"
AGENT_MOUNT_LOCAL_REPO=false

# ZMQ Configuration
AGENT_ZMQ_BIND_HOSTNAME="localhost"
AGENT_ZMQ_BIND_INTERFACE="lo"
AGENT_NATS_STREAM_STORAGE_TYPE=file

# Always pull images
AGENT_ALWAYS_PULL_IMAGES=false

# Vector Log Aggregation
AGENT_VECTOR_AGGREGATOR_ADDR=host.containers.internal:6000
AGENT_LOG_DIR=~/.interactem/logs

# ============================================================================
# ORCHESTRATOR Service Configuration
# ============================================================================
ORCHESTRATOR_NATS_SERVER_URL=nats://nats1:4222
ORCHESTRATOR_API_KEY=changethis

# ============================================================================
# LAUNCHER Service Configuration
# ============================================================================
LAUNCHER_NATS_SERVER_URL="nats://nats1:4222"
LAUNCHER_SFAPI_KEY_PATH="~/.superfacility/key.pem"
LAUNCHER_CONDA_ENV="interactem"
LAUNCHER_ENV_FILE_PATH="/path/to/.env/file"
LAUNCHER_SFAPI_ACCOUNT="PUT_THE_ACCOUNT_HERE"
LAUNCHER_SFAPI_QOS="debug"

# ============================================================================
# METRICS Service Configuration
# ============================================================================
METRICS_NATS_SERVER_URL=nats://nats1:4222
METRICS_PROMETHEUS_PORT=8001

# ============================================================================
# CLI Service Configuration
# ============================================================================
CLI_INTERACTEM_USERNAME=admin@example.com
CLI_INTERACTEM_PASSWORD=changethis
CLI_API_BASE_URL=http://localhost:8080/api/v1

# ============================================================================
# Docker Images
# ============================================================================
DOCKER_IMAGE_BACKEND=backend
DOCKER_IMAGE_FRONTEND=frontend
DOCKER_IMAGE_ORCHESTRATOR=orchestrator
DOCKER_IMAGE_AGENT=agent
DOCKER_IMAGE_OPERATOR=operator
DOCKER_IMAGE_CALLOUT=callout
DOCKER_IMAGE_LAUNCHER=sfapi-agent-launcher
DOCKER_IMAGE_METRICS=metrics

# ============================================================================
# Operator Build Configuration (local registry + podman pull)
# ============================================================================
# Podman socket URI for building and pushing operator images
REGISTRY_PODMAN_SERVICE_URI=
# Docker-bake configuration file for operator builds
REGISTRY_BAKE_FILE=./docker-bake.hcl
# Verbose output for operator build operations
REGISTRY_VERBOSE=false
# Local registry URL for pushing built operator images
REGISTRY_REGISTRY=host.containers.internal:5001/ghcr.io/nersc/interactem