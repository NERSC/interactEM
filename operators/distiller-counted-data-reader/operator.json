{
  "id": "5527c101-304b-47d0-8814-488455847ba6",
  "image": "ghcr.io/nersc/interactem/distiller-counted-data-reader:latest",
  "label": "Counted Data Reader",
  "description": "Reads a file of sparse data and sends out batched frames of data.",
  "outputs": [
    {
      "name": "counted_data",
      "label": "Counted Data",
      "type": "sparse_frame",
      "description": "Sparse frames of counted data"
    }
  ],
  "parameters": [
    {
      "name": "counted_data_dir",
      "label": "Counted data directory",
      "type": "mount",
      "default": "/global/cfs/cdirs/ncemhub/distiller/counted/",
      "description": "The path to the sparse H5 data files",
      "required": true
    },
    {
      "name": "scan_id",
      "label": "Scan ID",
      "type": "int",
      "default": "10000",
      "description": "The Distiller Scan ID of the dataset to be read",
      "required": true
    },
        {
      "name": "file_suffix",
      "label": "File suffix",
      "type": "str",
      "default": "",
      "description": "The file suffix type (STANDARD or CENTERED).",
      "required": true
    },
    {
      "name": "batch_size_mb",
      "label": "Batch size (MB)",
      "type": "float",
      "default": 1.0,
      "description": "The size of each emitted batch in megabytes.",
      "required": false
    },
    {
      "name": "cache_last_file",
      "label": "Cache last file",
      "type": "bool",
      "default": false,
      "description": "Cache the last loaded file to avoid re-reading between triggers.",
      "required": false
    }

  ],
  "triggers": [
    {
      "name": "read_now",
      "label": "Read counted data now",
      "description": "Manually read and emit the next batch of counted data without waiting.",
      "mode": "drain"
    }
  ]
}
